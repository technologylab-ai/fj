<!DOCTYPE html>
<html lang="en">
<head>
  <<<head_block>>>
  <title>Dashboard — fj</title>
</head>
<body class="font-sans bg-gray-50 dark:bg-gray-950 text-gray-800 dark:text-gray-100 min-h-screen flex flex-col">

  <<<html_nav>>>

  <!-- Main Content Section -->
  <main class="container mx-auto p-4 flex-grow">
    <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6">Dashboard</h2>

    <!-- Stats Section -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="bg-white dark:bg-gray-900 p-5 rounded-lg shadow-md dark:shadow-2xl dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-700">
        <strong class="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-1">Invoiced Total ({{year}})</strong>
        <span id="total-invoiced" class="text-2xl font-bold text-blue-600 dark:text-blue-400">{{ currency_symbol }} {{invoiced_total}}<br><span class="text-rose-400 dark:text-rose-400">{{ currency_symbol }} {{invoices_open_amount}} open</span></span>
      </div>
      <div class="bg-white dark:bg-gray-900 p-5 rounded-lg shadow-md dark:shadow-2xl dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-700">
        <strong class="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-1">Invoices</strong>
        <span id="invoice-count" class="text-2xl font-bold text-gray-700 dark:text-gray-300">{{invoices_total}} total<br><span class="text-orange-300 dark:text-orange-400">{{invoices_open}} open</span></span>
      </div>
      <div class="bg-white dark:bg-gray-900 p-5 rounded-lg shadow-md dark:shadow-2xl dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-700">
        <strong class="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-1">Offered Total ({{year}})</strong>
        <span id="offer-count" class="text-2xl font-bold text-green-600 dark:text-green-400">{{ currency_symbol }} {{offers_accepted_amount}} accepted<br><span class="text-rose-400 dark:text-rose-400">{{ currency_symbol }} {{offers_pending_amount}} pending</span></span>
      </div>
      <div class="bg-white dark:bg-gray-900 p-5 rounded-lg shadow-md dark:shadow-2xl dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-700">
        <strong class="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-1">Offers</strong>
        <span id="offer-count" class="text-2xl font-bold text-gray-700 dark:text-gray-300">{{offers_total}} total<br><span class="text-rose-400 dark:text-rose-400">{{offers_open}} pending</span></span>
      </div>
    </div>

    <!-- Recent Documents Section -->
    <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100 mb-4">Recent Documents</h3>
    <div class="bg-white dark:bg-gray-900 rounded-lg shadow-md dark:shadow-2xl dark:shadow-gray-900/50 overflow-hidden border border-gray-200 dark:border-gray-700">
      <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 table-fixed">
        <thead class="bg-gray-50 dark:bg-gray-800">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-1/12">Type</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-1/12">ID</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-2/12">Client</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-1/12">Date</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-2/12">Project</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-1/12">Status</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-1/12">Amount</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sm:px-2 w-3/12">Actions</th>
          </tr>
        </thead>
        <tbody id="recent-documents" class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
          {{^recent_docs}}
            <tr>
              <td colspan="8" class="px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400 italic sm:px-2">
                <i>(No recent documents).</i>
              </td>
            </tr>
          {{/recent_docs}}
          {{#recent_docs}}
          <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-150">
            <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100 sm:px-2">{{type}}</td>
            <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 sm:px-2">{{id}}</td>
            <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 sm:px-2">{{client}}</td>
            <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 sm:px-2">{{date}}</td>
            <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 sm:px-2">{{project}}</td>
            <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 sm:px-2">{{status}}</td>
            <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 sm:px-2">{{amount}}</td>
            <td class="px-6 py-4 text-right text-sm font-medium sm:px-2">
              <div class="flex flex-wrap justify-end sm:justify-center gap-2 items-center">
                <a href="/{{type}}/view/{{id}}" class="text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200 text-xs sm:text-sm">View</a>
                <a href="/{{type}}/pdf/{{id}}" target="_blank" class="text-purple-600 dark:text-purple-400 hover:text-purple-900 dark:hover:text-purple-300 transition-colors duration-200 text-xs sm:text-sm">PDF</a>
                <a href="/{{type}}/download/{{id}}?client={{client}}" class="">
                  <button class="text-sky-500 dark:text-sky-400 font-normal px-1 py-2 rounded inline-flex items-center hover:text-sky-600 dark:hover:text-sky-300">
                    <svg class="fill-current w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"/></svg>
                    <span>Download</span>
                  </button>
                </a>
              </div>
            </td>
          </tr>
          {{/recent_docs}}
        </tbody>
      </table>
    </div>
  </main>

  <!-- Footer Section -->
  <footer class="container mx-auto p-4 mt-8 border-t border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 text-sm">
    <div class="mb-4">
      <span class="font-bold text-gray-700 dark:text-gray-300">Git Status</span>
      <a href="/git/commit" class="ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200">commit</a>
      <a href="/git/push" class="ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200">push</a>
      <pre class="bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 p-2 rounded-md text-xs overflow-auto w-full mt-2 border border-gray-200 dark:border-gray-700">{{git_status}}</pre>
    </div>
    <div class="text-center text-gray-500 dark:text-gray-400 mt-4">
      <i><a href="https://github.com/technologylab-ai/fj" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300">fj version {{version}}</a> — <span class="fj_home"><i>{{fj_home}}</i></span></i>
    </div>
  </footer>

  <script>

  </script>
</body>
</html>

