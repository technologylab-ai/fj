<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard — fj</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Configure Tailwind to use Inter font and extend default theme if needed -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Optional: Custom styles for specific overrides or elements not easily covered by Tailwind -->
  <style>
    /* Ensure Inter font is loaded for better appearance */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

    /* Keep specific styles that are unique or override Tailwind defaults if necessary */
    .fj_home {
        display: inline-block;
        unicode-bidi: embed;
        font-family: monospace;
        white-space: pre;
    }
    /* The .version styling will be handled by Tailwind classes */
  </style>
</head>
<body class="font-sans bg-gray-50 text-gray-800 min-h-screen flex flex-col">
  <!-- Header Section -->
  <header class="bg-white shadow-sm p-4 border-b border-gray-200">
    <div class="container mx-auto flex flex-col md:flex-row items-start md:items-center justify-between">
      <strong class="text-xl font-semibold text-gray-900 mb-2 md:mb-0">
        fj — The Commandline Company — <i class="font-normal text-gray-600">{{company}}</i>
      </strong>
      <nav class="flex flex-wrap gap-x-4 gap-y-2 text-sm md:text-base">
        <a href="/dashboard" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">Dashboard</a>
        <a href="/client" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">Clients</a>
        <a href="/rate" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">Rate Sets</a>
        <a href="/offer" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">Offers</a>
        <a href="/invoice" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">Invoices</a>
        <a href="/letter" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">Letters</a>
        <a href="/travel" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">Travel Expenses</a>
      </nav>
    </div>
  </header>

  <!-- Main Content Section -->
  <main class="container mx-auto p-4 flex-grow">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Dashboard</h2>

    <!-- Stats Section -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200">
        <strong class="block text-lg font-semibold text-gray-700 mb-1">Invoiced Total ({{year}})</strong>
        <span id="total-invoiced" class="text-2xl font-bold text-blue-600">{{ currency_symbol }} {{invoiced_total}}</span>
      </div>
      <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200">
        <strong class="block text-lg font-semibold text-gray-700 mb-1">Invoices</strong>
        <span id="invoice-count" class="text-2xl font-bold text-gray-700">{{invoices_total}} total / <span class="text-orange-500">{{invoices_open}} open</span></span>
      </div>
      <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200">
        <strong class="block text-lg font-semibold text-gray-700 mb-1">Offered Total ({{year}})</strong>
        <span id="offer-count" class="text-2xl font-bold text-green-600">{{ currency_symbol }} {{offers_accepted_amount}} accepted / <span class="text-yellow-500">{{offers_pending_amount}} pending</span></span>
      </div>
      <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200">
        <strong class="block text-lg font-semibold text-gray-700 mb-1">Offers</strong>
        <span id="offer-count" class="text-2xl font-bold text-gray-700">{{offers_total}} total / <span class="text-yellow-500">{{offers_open}} pending</span></span>
      </div>
    </div>

    <!-- Recent Documents Section -->
    <h3 class="text-xl font-bold text-gray-900 mb-4">Recent Documents</h3>
    <div class="bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Client</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Project</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody id="recent-documents" class="bg-white divide-y divide-gray-200">
          {{^recent_docs}}
            <tr>
              <td colspan="8" class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 italic">
                <i>(No recent documents).</i>
              </td>
            </tr>
          {{/recent_docs}}
          {{#recent_docs}}
          <tr class="hover:bg-gray-50 transition-colors duration-150">
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" data-label="Type">{{type}}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700" data-label="ID">{{id}}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700" data-label="Client">{{client}}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700" data-label="Date">{{date}}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700" data-label="Project">{{project}}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700" data-label="Status">{{status}}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700" data-label="Amount">{{amount}}</td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <div class="flex items-center space-x-2">
                <a href="/{{type}}/view/{{id}}" class="text-blue-600 hover:text-blue-900 transition-colors duration-200">View</a>
                <a href="/{{type}}/pdf/{{id}}" target="_blank" class="text-purple-600 hover:text-purple-900 transition-colors duration-200">PDF</a>
                <a href="/{{type}}/download/{{id}}?client={{client}}" class="text-green-600 hover:text-green-900 transition-colors duration-200 text-lg"> ⬇ </a>
              </div>
            </td>
          </tr>
          {{/recent_docs}}
        </tbody>
      </table>
    </div>
  </main>

  <!-- Footer Section -->
  <footer class="container mx-auto p-4 mt-8 border-t border-gray-200 text-gray-600 text-sm">
    <hr class="mb-4 hidden" /> <!-- Tailwind's border-t replaces hr -->
    <!-- <div class="flex flex-col md:flex-row justify-between items-center"> -->
      <span class="mb-2 md:mb-0">
        <!-- <b>Git Status</b> -->
      <pre class="bg-gray-100 p-2 rounded-md text-xs overflow-auto w-full md:w-auto mt-2 md:mt-0">{{git_status}}</pre>
        <a href="/git/commit" class="ml-2 text-blue-600 hover:text-blue-800 transition-colors duration-200">commit</a>
        <a href="/git/push" class="ml-2 text-blue-600 hover:text-blue-800 transition-colors duration-200">push</a>
      </span>
    <!-- </div> -->
    <center class="mt-4 text-gray-500">
      <i>fj version {{version}} — <span class="fj_home">{{fj_home}}</span></i>
    </center>
  </footer>

  <script>
    // No specific JavaScript needed for styling, but you can add your app logic here.
  </script>
</body>
</html>

